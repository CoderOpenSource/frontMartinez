<div class="container mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-4 text-center">Lista de Consultas</h1>

  <div class="flex justify-between items-center mb-4">
    <!-- Input para seleccionar fecha -->
    <input
      type="date"
      [(ngModel)]="selectedDate"
      class="border rounded px-3 py-2"
      (change)="filtrarConsultasPorFecha()"
    />

    <!-- Botón para filtrar consultas -->
    <button
      class="bg-blue-500 text-white px-4 py-2 rounded"
      (click)="filtrarConsultasPorFecha()"
    >
      Filtrar por Fecha
    </button>
  </div>

  <!-- Spinner de carga -->
  <div *ngIf="loading" class="spinner-container">
    <div class="spinner"></div>
  </div>

  <!-- Tabla para mostrar las citas filtradas -->
  <div class="mb-8">
    <h2 class="text-xl font-bold mb-4 text-center">Citas Disponibles</h2>
    <table>
      <thead>
      <tr>
        <th>Fecha</th>
        <th>Hora</th>
        <th>Paciente</th>
        <th>Acción</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let cita of citas">
        <td>{{ cita.fecha }}</td>
        <td>{{ cita.hora }}</td>
        <td>{{ cita.pacienteNombre }} {{ cita.pacienteApellido }}</td>
        <td>
          <button
            class="bg-green-500 text-white px-4 py-2 rounded"
            (click)="crearConsulta(cita)"
          >
            Crear Consulta
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Tabla para mostrar consultas -->
  <h2 class="text-xl font-bold mb-4 text-center">Consultas Existentes</h2>
  <table>
    <thead>
    <tr>
      <th>Fecha</th>
      <th>Diagnóstico</th>
      <th>Tratamiento</th>
      <th>Notas</th>
      <th>Paciente</th>
      <th>Especialidad</th>
      <th>Derivó a Procedimiento</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let consulta of consultas">
      <td>{{ consulta.fecha }}</td>
      <td>{{ consulta.diagnostico }}</td>
      <td>{{ consulta.tratamiento }}</td>
      <td>{{ consulta.notas }}</td>
      <td>{{ consulta.pacienteNombre }} {{ consulta.pacienteApellido }}</td>
      <td>{{ consulta.especialidadNombre }}</td>
      <td>
        <!-- Mostrar "No" si es nulo o falso, y "Sí" si es verdadero -->
        {{ consulta.derivoProcedimiento === true ? 'Sí' : 'No' }}
      </td>
    </tr>
    </tbody>
  </table>
</div>

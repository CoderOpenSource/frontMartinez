import{a as A}from"./chunk-VQFNXLW7.js";import{a as I,b as T,e as F,k as B}from"./chunk-BTD7GRPP.js";import{b as V}from"./chunk-ZBLQCJ4V.js";import{$a as u,Da as l,Ea as M,Ra as g,Rb as S,Sb as O,Ta as _,Ub as P,Va as o,Wa as t,Xa as y,_a as h,ab as c,ba as v,e as L,fb as a,gb as x,hb as E,jb as b,ka as p,kb as w,la as m,lb as C,nb as k}from"./chunk-IG4KVHXC.js";var f=L(A());function j(r,s){r&1&&(o(0,"div",2),y(1,"div",3),t())}function D(r,s){if(r&1){let i=h();o(0,"tr")(1,"td"),a(2),t(),o(3,"td"),a(4),t(),o(5,"td"),a(6),t(),o(7,"td")(8,"button",11),u("click",function(){let e=p(i).$implicit,d=c(2);return m(d.editEspecialidad(e.id))}),a(9," Editar "),t(),o(10,"button",12),u("click",function(){let e=p(i).$implicit,d=c(2);return m(d.deleteEspecialidad(e.id))}),a(11," Eliminar "),t()()()}if(r&2){let i=s.$implicit;l(2),x(i.id),l(2),x(i.nombre),l(2),x(i.descripcion)}}function N(r,s){if(r&1){let i=h();o(0,"div",13)(1,"div",14)(2,"h2",15),a(3),t(),o(4,"div",16)(5,"label",17),a(6,"Nombre"),t(),o(7,"input",18),C("ngModelChange",function(e){p(i);let d=c(2);return w(d.selectedEspecialidad.nombre,e)||(d.selectedEspecialidad.nombre=e),m(e)}),t()(),o(8,"div",16)(9,"label",17),a(10,"Descripci\xF3n"),t(),o(11,"textarea",19),C("ngModelChange",function(e){p(i);let d=c(2);return w(d.selectedEspecialidad.descripcion,e)||(d.selectedEspecialidad.descripcion=e),m(e)}),t()(),o(12,"div",20)(13,"button",21),u("click",function(){p(i);let e=c(2);return m(e.saveEspecialidad())}),a(14),t(),o(15,"button",22),u("click",function(){p(i);let e=c(2);return m(e.closeModal())}),a(16," Cancelar "),t()()()()}if(r&2){let i=c(2);l(3),E(" ",i.isEditMode?"Editar Especialidad":"A\xF1adir Especialidad"," "),l(4),b("ngModel",i.selectedEspecialidad.nombre),l(4),b("ngModel",i.selectedEspecialidad.descripcion),l(3),E(" ",i.isEditMode?"Actualizar":"Guardar"," ")}}function W(r,s){if(r&1){let i=h();o(0,"div",4)(1,"h1",5),a(2,"Gestionar Especialidades"),t(),o(3,"div",6)(4,"button",7),u("click",function(){p(i);let e=c();return m(e.addEspecialidad())}),a(5," A\xF1adir Especialidad "),t()(),o(6,"table",8)(7,"thead")(8,"tr")(9,"th"),a(10,"ID"),t(),o(11,"th"),a(12,"Nombre"),t(),o(13,"th"),a(14,"Descripci\xF3n"),t(),o(15,"th"),a(16,"Acciones"),t()()(),o(17,"tbody"),g(18,D,12,3,"tr",9),t()(),g(19,N,17,4,"div",10),t()}if(r&2){let i=c();l(18),_("ngForOf",i.especialidades),l(),_("ngIf",i.showModal)}}var K=(()=>{let s=class s{constructor(n){this.http=n,this.isLoading=!1,this.especialidades=[],this.selectedEspecialidad={id:0,nombre:"",descripcion:""},this.showModal=!1,this.isEditMode=!1,this.toastMessage=null,this.toastClass="",this.showToastModal=!1}ngOnInit(){this.loadEspecialidades()}loadEspecialidades(){this.isLoading=!0,this.http.get("http://143.198.147.110/api/especialidades").subscribe(n=>{this.especialidades=n,this.isLoading=!1},n=>{this.isLoading=!1,console.error("Error loading especialidades",n)})}addEspecialidad(){this.selectedEspecialidad={id:0,nombre:"",descripcion:""},this.isEditMode=!1,this.showModal=!0}editEspecialidad(n){this.selectedEspecialidad=this.especialidades.find(e=>e.id===n)||this.selectedEspecialidad,this.isEditMode=!0,this.showModal=!0}deleteEspecialidad(n){f.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.http.delete(`http://143.198.147.110/api/especialidades/${n}`).subscribe(()=>{f.default.fire({title:"Eliminado con \xE9xito",text:"La especialidad ha sido eliminada correctamente.",icon:"success",showConfirmButton:!1,timer:2e3}),this.loadEspecialidades()},d=>{f.default.fire({title:"Error al eliminar la especialidad",text:"Por favor, int\xE9ntalo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error deleting especialidad",d)})})}saveEspecialidad(){let n=this.isEditMode?`http://143.198.147.110/api/especialidades/${this.selectedEspecialidad.id}`:"http://143.198.147.110/api/especialidades";(this.isEditMode?this.http.put(n,this.selectedEspecialidad):this.http.post(n,this.selectedEspecialidad)).subscribe(()=>{f.default.fire({title:`Especialidad ${this.isEditMode?"actualizada":"creada"} con \xE9xito`,icon:"success",showConfirmButton:!1,timer:2e3}),this.loadEspecialidades(),this.showModal=!1},d=>{f.default.fire({title:`Error al ${this.isEditMode?"actualizar":"crear"} la especialidad`,text:"Por favor, int\xE9ntalo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error saving especialidad",d)})}closeModal(){this.showModal=!1}};s.\u0275fac=function(e){return new(e||s)(M(V))},s.\u0275cmp=v({type:s,selectors:[["app-especialidades"]],standalone:!0,features:[k],decls:2,vars:2,consts:[["class","spinner-container",4,"ngIf"],["class","container mx-auto px-4 py-8",4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"container","mx-auto","px-4","py-8"],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"flex","justify-center","mb-6"],[2,"background-color","#28a745","color","white",3,"click"],[1,"bg-white","shadow-lg","rounded-lg"],[4,"ngFor","ngForOf"],["class","fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center",4,"ngIf"],[2,"background-color","#007bff","color","white","margin-right","5px",3,"click"],[2,"background-color","#dc3545","color","white",3,"click"],[1,"fixed","top-0","left-0","w-full","h-full","bg-black","bg-opacity-50","flex","items-center","justify-center"],[1,"bg-white","p-6","rounded-lg","shadow-md","w-96"],[1,"text-lg","font-bold","mb-4","text-center"],[1,"mb-4"],[1,"block","text-sm","font-bold","mb-2"],["placeholder","Ingrese el nombre",1,"w-full","px-3","py-2","border","rounded-lg",3,"ngModelChange","ngModel"],["placeholder","Ingrese la descripci\xF3n",1,"w-full","px-3","py-2","border","rounded-lg",3,"ngModelChange","ngModel"],[1,"flex","justify-between"],[1,"bg-blue-500","text-white","px-4","py-2","rounded-lg",3,"click"],[1,"bg-gray-500","text-white","px-4","py-2","rounded-lg",3,"click"]],template:function(e,d){e&1&&g(0,j,2,0,"div",0)(1,W,20,2,"div",1),e&2&&(_("ngIf",d.isLoading),l(),_("ngIf",!d.isLoading))},dependencies:[P,S,O,B,I,T,F],styles:[".spinner-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000c;display:flex;justify-content:center;align-items:center;z-index:1000}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid #ffffff;border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dee2e6;padding:12px;text-align:left}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:700;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{opacity:.9}@media (max-width: 768px){table[_ngcontent-%COMP%]{font-size:14px}button[_ngcontent-%COMP%]{width:100%;margin-top:10px}}"]});let r=s;return r})();export{K as EspecialidadesComponent};

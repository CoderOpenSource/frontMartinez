import{a as F}from"./chunk-VQFNXLW7.js";import{b as O}from"./chunk-ZBLQCJ4V.js";import{$a as u,Da as r,Ea as b,Ra as h,Rb as y,Sb as w,Ta as f,Ub as I,Va as e,Wa as t,Xa as S,_a as E,ab as _,ba as v,e as M,eb as C,fb as n,gb as d,ka as g,la as x,nb as P}from"./chunk-IG4KVHXC.js";var p=M(F());function L(o,c){o&1&&(e(0,"div",3),S(1,"div",4),t())}function T(o,c){if(o&1&&(e(0,"tr",14)(1,"td",12),n(2),t(),e(3,"td",12),n(4),t(),e(5,"td",12),n(6),t(),e(7,"td",12),n(8),t(),e(9,"td",12),n(10),t(),e(11,"td",12),n(12),t(),e(13,"td",12),n(14),t(),e(15,"td",12),n(16),t(),e(17,"td",12),n(18),t()()),o&2){let i=c.$implicit;r(2),d(i.id),r(2),d(i.usuario.nombre),r(2),d(i.usuario.apellido),r(2),d(i.usuario.email),r(2),d(i.carnet),r(2),d(i.sexo),r(2),d(i.edad),r(2),d(i.fechaInicioSeguro),r(2),d(i.fechaFinSeguro)}}function k(o,c){if(o&1){let i=E();e(0,"div",5)(1,"h1",6),n(2,"Gestionar Pacientes"),t(),e(3,"div",7)(4,"input",8,0),u("change",function(l){g(i);let s=_();return x(s.onFileSelected(l))}),t(),e(6,"button",9),u("click",function(){g(i);let l=C(5);return x(l.click())}),n(7," Subir Pacientes "),t()(),e(8,"table",10)(9,"thead")(10,"tr",11)(11,"th",12),n(12,"ID"),t(),e(13,"th",12),n(14,"Nombre"),t(),e(15,"th",12),n(16,"Apellido"),t(),e(17,"th",12),n(18,"Email"),t(),e(19,"th",12),n(20,"Carnet"),t(),e(21,"th",12),n(22,"Sexo"),t(),e(23,"th",12),n(24,"Edad"),t(),e(25,"th",12),n(26,"Inicio Seguro"),t(),e(27,"th",12),n(28,"Fin Seguro"),t()()(),e(29,"tbody"),h(30,T,19,9,"tr",13),t()()()}if(o&2){let i=_();r(30),f("ngForOf",i.pacientes)}}var B=(()=>{let c=class c{constructor(a){this.http=a,this.pacientes=[],this.isLoading=!1}ngOnInit(){this.loadPacientes()}loadPacientes(){this.isLoading=!0,this.http.get("http://143.198.147.110/api/pacientes").subscribe(a=>{this.pacientes=a,this.isLoading=!1},a=>{this.isLoading=!1,p.default.fire({title:"Error al cargar pacientes",text:"Por favor, int\xE9ntalo nuevamente.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error loading pacientes",a)})}onFileSelected(a){let l=a.target.files[0];if(l){let s=new FormData;s.append("file",l),this.isLoading=!0,this.http.post("http://143.198.147.110/api/pacientes/cargar",s,{responseType:"json"}).subscribe(m=>{this.isLoading=!1,m&&m.mensaje?(p.default.fire({title:"Archivo cargado con \xE9xito",text:"Los pacientes se han actualizado correctamente.",icon:"success",showConfirmButton:!1,timer:2e3}),this.loadPacientes()):p.default.fire({title:"Error al cargar el archivo",text:"El archivo fue recibido, pero ocurri\xF3 un problema al procesarlo.",icon:"warning",confirmButtonText:"Aceptar"})},m=>{this.isLoading=!1,p.default.fire({title:"Error al cargar el archivo",text:"Por favor, verifica el archivo y vuelve a intentarlo.",icon:"error",confirmButtonText:"Aceptar"}),console.error("Error uploading file",m)})}}};c.\u0275fac=function(l){return new(l||c)(b(O))},c.\u0275cmp=v({type:c,selectors:[["app-paciente"]],standalone:!0,features:[P],decls:2,vars:2,consts:[["fileInput",""],["class","spinner-container",4,"ngIf"],["class","container mx-auto px-4 py-8",4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"container","mx-auto","px-4","py-8"],[1,"text-3xl","font-bold","mb-8","text-center","text-gray-800"],[1,"flex","justify-center","mb-6"],["type","file","accept",".xlsx, .xls",1,"hidden",3,"change"],[1,"bg-green-500","text-white","px-4","py-2","rounded-lg","hover:bg-green-600",3,"click"],[1,"min-w-full","bg-white","shadow-lg","rounded-lg","border-collapse"],[1,"bg-gray-800","text-white"],[1,"p-4","border"],["class","hover:bg-gray-100",4,"ngFor","ngForOf"],[1,"hover:bg-gray-100"]],template:function(l,s){l&1&&h(0,L,2,0,"div",1)(1,k,31,1,"div",2),l&2&&(f("ngIf",s.isLoading),r(),f("ngIf",!s.isLoading))},dependencies:[I,y,w],styles:[".spinner-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#000c;display:flex;justify-content:center;align-items:center;z-index:1000}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid #ffffff;border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dee2e6;padding:12px;text-align:left}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:700;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{opacity:.9}@media (max-width: 768px){table[_ngcontent-%COMP%]{font-size:14px}button[_ngcontent-%COMP%]{width:100%;margin-top:10px}}"]});let o=c;return o})();export{B as PacienteComponent};
